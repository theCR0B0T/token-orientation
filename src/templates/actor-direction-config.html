<form autocomplete="off">
  <div id="movement-types">
    {{#each config as |dirs type|}}
      <fieldset data-type="{{type}}">
        <legend>{{type}}</legend>
        {{#each dirs as |img dir|}}
          <div class="form-group">
            <label>{{dir}}</label>
            <input type="text" name="config.{{@../key}}.{{dir}}" value="{{img}}" placeholder="Image URL for {{dir}}" />
          </div>
        {{/each}}
        <button type="button" class="remove-type">Remove</button>
      </fieldset>
    {{/each}}
  </div>
  <div class="form-group">
    <label>Add Movement Type</label>
    <input type="text" id="new-type-name" placeholder="e.g., burrow" />
    <button type="button" id="add-type">Add</button>
  </div>
  <footer>
    <button type="submit">Save</button>
  </footer>
</form>

<script>
  document.getElementById('add-type').addEventListener('click', () => {
    const type = document.getElementById('new-type-name').value.trim();
    if (!type) return;
    const container = document.getElementById('movement-types');
    const html = `
      <fieldset data-type=\"${type}\">
        <legend>${type}</legend>
        ${['N', 'E', 'S', 'W'].map(dir => `
          <div class=\"form-group\">
            <label>${dir}</label>
            <input type=\"text\" name=\"config.${type}.${dir}\" placeholder=\"Image URL for ${dir}\" />
          </div>`).join('')}
        <button type=\"button\" class=\"remove-type\">Remove</button>
      </fieldset>
    `;
    container.insertAdjacentHTML('beforeend', html);
  });

  document.addEventListener('click', (event) => {
    if (event.target.classList.contains('remove-type')) {
      const fieldset = event.target.closest('fieldset');
      if (fieldset) fieldset.remove();
    }
  });
</script>